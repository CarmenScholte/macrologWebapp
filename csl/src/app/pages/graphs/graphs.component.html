<div class="graph">

 <div class="graph__image">
	<svg width="650" height="400" class="graph__svg">

		<g *ngFor="let d of logBars; let i = index" (mouseover)="showMacros(d)">
			<!--<circle [attr.cx]="d.x" [attr.cy]="d.y" r="40" stroke="green" stroke-width="4" fill="yellow" />-->
			<text [attr.x]="(barWidth* i)" [attr.y]="graphHeight - graphLegenda + 15 " [attr.fill]="d.c">
				<tspan> {{d.day | date:'dd'}} </tspan>
			</text>

			<rect [attr.x]="i*barWidth" [attr.width]="barWidth" [attr.y]="getYPosProtein(d)" [attr.height]="getHeightProtein(d)" [attr.fill]="'#5bd086'"  style="stroke:black;stroke-width:1;opacity:0.5" />
			<rect [attr.x]="i*barWidth" [attr.width]="barWidth" [attr.y]="getYPosFat(d)" [attr.height]="getHeightFat(d)" [attr.fill]="'#f7ed70'"  style="stroke:black;stroke-width:1;opacity:0.5"/>
			<rect [attr.x]="i*barWidth" [attr.width]="barWidth" [attr.y]="getYPosCarbs(d)" [attr.height]="getHeightCarbs(d)" [attr.fill]="'#fb8353'"  style="stroke:black;stroke-width:1;opacity:0.5"/>

			<!--<text [attr.x]="(20 * i)" [attr.y]="15" fill="red" transform="rotate(30 20,40)">{{d.day}}</text>-->
		</g>
	</svg>
 </div>
	<div class="graph__controls">

	<button class="button button--transparent" (click)="monthBack()">
		<i class="fas fa-arrow-left"></i>
	</button>
		<div class="graph__datelabel">{{dateFrom | date:'MMMM yyyy'}}</div>
	<button class="button button--transparent" (click)="monthForward()">
		<i class="fas fa-arrow-right"></i>
	</button>
	</div>
  <div class="graph__details">
	<table *ngIf="infoMacro">
		<tr>
			<td>Day</td>
			<td>{{infoMacro.day | date:'dd MMMM'}}</td>
		</tr>
		<tr>
			<td>Protein</td>
			<td>{{infoMacro.macro.protein  | number:'1.1-1'}}</td>
		</tr>
		<tr>
			<td>Fat</td>
			<td>{{infoMacro.macro.fat  | number:'1.1-1'}}</td>
		</tr>
		<tr>
			<td>Carbs</td>
			<td>{{infoMacro.macro.carbs  | number:'1.1-1'}}</td>
		</tr>
		<tr>
			<td>Calories</td>
			<td>{{infoMacro.macro.calories  | number:'1.0-0'}}</td>
		</tr>
	</table>
	</div>

	<table *ngIf="false">
		<tr>
			<th>day</th>
			<th>protein</th>
			<th>fat</th>
			<th>carbs</th>
			<th>calories</th>
		</tr>
		<tr *ngFor="let d of allLogs; let i = index">
		 	 <td>{{d.day | date}}</td>
			 <td>{{d.macro.protein  | number:'1.1-1'}}</td>
			  <td>{{d.macro.fat  | number:'1.1-1'}}</td>
		  	<td>{{d.macro.carbs  | number:'1.1-1'}}</td>
			<td>{{d.macro.calories  | number:'1.0-0'}}</td>
		</tr>
	</table>

	<!--<svg width="800" height="300">-->
		<!--<g *ngFor="let d of data">-->
			<!--&lt;!&ndash;<circle [attr.cx]="d.x" [attr.cy]="d.y" r="40" stroke="green" stroke-width="4" fill="yellow" />&ndash;&gt;-->
			<!--<rect [attr.x]="d.x" [attr.width]="30" [attr.y]="200" [attr.height]="d.y" [attr.fill]="d.c" style="stroke:black;stroke-width:5;opacity:0.5" />-->

			<!--<text x="0" y="15" fill="red" transform="rotate(30 20,40)">I love SVG!</text>-->
		<!--</g>-->
	<!--</svg>-->

</div>
